name: Angular CD
 
on:

  workflow_run:

    workflows: ["Angular CI"]

    types:

      - completed
 
permissions:

  contents: read

  pages: write

  id-token: write
 
jobs:

  deploy:

    if: ${{ github.event.workflow_run.conclusion == 'success' }}

    runs-on: ubuntu-latest
 
    steps:

      - name: Download build artifact

        uses: actions/download-artifact@v4

        with:

          name: angular-build

          path: dist/angular-ci-cd
 
      - name: Upload Pages artifact

        uses: actions/upload-pages-artifact@v3

        with:

          path: dist/angular-ci-cd
 
      - name: Deploy to GitHub Pages

        id: deploy

        uses: actions/deploy-pages@v4

 